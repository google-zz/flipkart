<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>üéâ Spin & Win ‚Äì Flipkart Big Sale!</title>
<style>
  body { background:#f1f3f6; margin:0; padding:0; font-family:Arial, sans-serif; text-align:center; }
  header { background:#2874f0; color:#fff; padding:12px; font-size:1.1em; }
  header img { height:40px; vertical-align:middle; }

  .wheel-container { width:90vw; max-width:320px; height:90vw; max-height:320px; margin:20px auto; position:relative; }
  .wheel { width:100%; height:100%; border-radius:50%; border:8px solid #2874f0;
    background:conic-gradient(#ffeb3b 0deg 120deg, #ff7043 120deg 240deg, #43a047 240deg 360deg);
    transition:transform 4s ease-out; }
  .pointer { position:absolute; top:-28px; left:50%; transform:translateX(-50%);
    width:0; height:0; border-left:14px solid transparent; border-right:14px solid transparent; border-bottom:24px solid red; }

  .spin-btn { background:#ffeb3b; color:#2874f0; padding:12px 20px; border:none; border-radius:8px;
    font-weight:700; margin-top:18px; cursor:pointer; }
  #result { font-size:1.1rem; color:#d32f2f; margin-top:14px; }

  #retryBtn { display:none; background:#2874f0; color:#fff; padding:10px 18px; border:none; border-radius:8px; cursor:pointer; margin-top:16px; }

  #userForm { display:none; max-width:300px; margin:20px auto; text-align:left; }
  #userForm input { padding:10px; margin:8px 0; width:100%; border:1px solid #ccc; border-radius:6px; font-size:1rem; }
  #submitBtn { background:green; color:#fff; padding:12px; border:none; border-radius:6px; width:100%; cursor:pointer; }
</style>
</head>
<body>

<header>
  <img src="flipkart.png" alt="Flipkart Logo"> Big Billion Days ‚Äì Spin & Win
</header>

<p>You have <b>3 Spins</b>. Try your luck üéÅ</p>

<div class="wheel-container">
  <div class="pointer"></div>
  <div id="wheel" class="wheel"></div>
</div>

<button id="spinBtn" class="spin-btn">Spin Now</button>
<div id="result"></div>
<button id="retryBtn">Retry</button>

<form id="userForm">
  <input id="name" type="text" placeholder="Enter your name" required>
  <input id="mobile" type="tel" placeholder="Enter your mobile number" required>
  <button id="submitBtn" type="submit">Submit</button>
</form>

<script>
(function(){
  const wheel = document.getElementById('wheel');
  const spinBtn = document.getElementById('spinBtn');
  const result = document.getElementById('result');
  const retryBtn = document.getElementById('retryBtn');
  const userForm = document.getElementById('userForm');
  let spins = 0;

  spinBtn.addEventListener('click', () => {
    spins++;
    let degree;
    if(spins === 1) degree = 1800 + 240; // Nothing
    else if(spins === 2) degree = 1800 + 240; // Nothing again
    else degree = 1800 + 60; // Win iPhone

    wheel.style.transform = "rotate(" + degree + "deg)";
    spinBtn.disabled = true;

    setTimeout(() => {
      if(spins === 1){
        result.textContent = "‚ùå Oops! Better luck next time.";
        showRetry();
      }
      else if(spins === 2){
        result.textContent = "‚ùå Again nothing. Scroll down and Retry after 10s.";
        showRetry();
      }
      else{
        result.textContent = "üéâ Congratulations! You won an iPhone üéÅ";
        userForm.style.display = "block";
        retryBtn.style.display = "none";
      }
    }, 4000);
  });

  function showRetry(){
    let time = 10;
    retryBtn.style.display = "inline-block";
    retryBtn.disabled = true;
    retryBtn.textContent = "Retry (" + time + ")";
    const timer = setInterval(() => {
      time--;
      retryBtn.textContent = "Retry (" + time + ")";
      if(time <= 0){
        clearInterval(timer);
        retryBtn.disabled = false;
        retryBtn.textContent = "Retry";
      }
    }, 1000);
  }

  retryBtn.addEventListener('click', () => {
    // redirect to ad page before retry
    window.open("https://example.com/ad-page", "_blank");
    spinBtn.disabled = false;
    retryBtn.style.display = "none";
  });

  userForm.addEventListener('submit', (e)=>{
    e.preventDefault();
    userForm.style.display = "none";
    alert("‚úÖ Submission successful. We‚Äôll contact you shortly regarding the reward.");
    window.location.href = "https://example.com/final"; // final redirect
    setTimeout(()=>{
      alert("üì¢ Reminder: We will contact you shortly for rewards.");
    }, 3000);
  });

})();
</script>

</body>
</html>
